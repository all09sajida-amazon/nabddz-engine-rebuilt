
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¹Ø±Ø¶ Ù…ØªÙƒØ§Ù…Ù„ - Ù†Ø¨Ø¶ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</title>
  
  <!-- Ø®Ø·ÙˆØ· Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <!-- Ù…ÙƒØªØ¨Ø© Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  
  <style>
    :root {
      --primary-color: #F7B801;
      --secondary-color: #F8F4E3;
      --background-color: #FEF9E7;
      --text-color: #7E5109;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Tajawal', sans-serif;
      background: linear-gradient(135deg, #FEF9E7 0%, #F8F4E3 100%);
      color: var(--text-color);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .logo {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--primary-color);
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .tagline {
      font-size: 1.2rem;
      color: var(--text-color);
      opacity: 0.8;
    }
    
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .tab {
      padding: 10px 20px;
      background: white;
      color: var(--text-color);
      border: 2px solid var(--text-color);
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Tajawal', sans-serif;
    }
    
    .tab.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    .tab-content {
      display: none;
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .section-title {
      font-size: 1.8rem;
      color: var(--primary-color);
      margin-bottom: 20px;
      text-align: center;
      font-weight: bold;
    }
    
    .section-description {
      text-align: center;
      margin-bottom: 30px;
      color: var(--text-color);
      opacity: 0.8;
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      color: var(--text-color);
      opacity: 0.8;
    }
    
    /* Ø£Ù†Ù…Ø§Ø· Identity Generator */
    .identity-generator {
      font-family: 'Tajawal', sans-serif;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(135deg, #FEF9E7 0%, #F8F4E3 100%);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      direction: rtl;
      text-align: right;
    }
    
    .identity-header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .identity-title {
      font-size: 2rem;
      color: #F7B801;
      margin-bottom: 10px;
      font-weight: bold;
    }
    
    .identity-subtitle {
      font-size: 1rem;
      color: #7E5109;
      opacity: 0.8;
    }
    
    .avatar-section {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .avatar-preview {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      margin: 0 auto 15px;
      border: 4px solid #F7B801;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }
    
    .avatar-preview:hover {
      transform: scale(1.05);
    }
    
    .avatar-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .generate-avatar-btn {
      background: linear-gradient(135deg, #F7B801, #F8F4E3);
      color: #7E5109;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Tajawal', sans-serif;
    }
    
    .generate-avatar-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(247, 184, 1, 0.3);
    }
    
    .form-section {
      margin-bottom: 25px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      font-weight: bold;
      color: #7E5109;
      margin-bottom: 8px;
      font-size: 1.1rem;
    }
    
    .form-input, .form-textarea {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #F8F4E3;
      border-radius: 10px;
      font-size: 1rem;
      font-family: 'Tajawal', sans-serif;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }
    
    .form-input:focus, .form-textarea:focus {
      outline: none;
      border-color: #F7B801;
    }
    
    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    .interests-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    
    .interest-tag {
      padding: 8px 15px;
      background: #F8F4E3;
      color: #7E5109;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
      border: 2px solid transparent;
    }
    
    .interest-tag:hover {
      background: #F7B801;
      color: white;
    }
    
    .interest-tag.selected {
      background: #F7B801;
      color: white;
      border-color: #7E5109;
    }
    
    .form-select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #F8F4E3;
      border-radius: 10px;
      font-size: 1rem;
      font-family: 'Tajawal', sans-serif;
      background: white;
      cursor: pointer;
    }
    
    .form-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }
    
    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 25px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Tajawal', sans-serif;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #F7B801, #F8F4E3);
      color: #7E5109;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(247, 184, 1, 0.3);
    }
    
    .btn-secondary {
      background: transparent;
      color: #7E5109;
      border: 2px solid #7E5109;
    }
    
    .btn-secondary:hover {
      background: #7E5109;
      color: white;
    }
    
    .identity-preview {
      margin-top: 30px;
      padding: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .preview-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .preview-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      overflow: hidden;
    }
    
    .preview-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .preview-info h3 {
      margin: 0;
      color: #7E5109;
    }
    
    .preview-info p {
      margin: 5px 0 0;
      color: #7E5109;
      opacity: 0.7;
    }
    
    .preview-bio {
      margin-bottom: 15px;
      color: #7E5109;
      line-height: 1.6;
    }
    
    .preview-interests {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .preview-interest {
      padding: 5px 12px;
      background: #F8F4E3;
      color: #7E5109;
      border-radius: 15px;
      font-size: 0.8rem;
    }
    
    /* Ø£Ù†Ù…Ø§Ø· Mood Archive */
    .mood-archive {
      font-family: 'Tajawal', sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(135deg, #FEF9E7 0%, #F8F4E3 100%);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      direction: rtl;
      text-align: right;
    }
    
    .archive-header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .archive-title {
      font-size: 2rem;
      color: #F7B801;
      margin-bottom: 10px;
      font-weight: bold;
    }
    
    .archive-subtitle {
      font-size: 1rem;
      color: #7E5109;
      opacity: 0.8;
    }
    
    .chart-container {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      margin-bottom: 30px;
      position: relative;
      height: 400px;
    }
    
    .controls-section {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: #F7B801;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 1rem;
      color: #7E5109;
      opacity: 0.8;
    }
    
    .mood-table {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .table-header {
      background: linear-gradient(135deg, #F7B801, #F8F4E3);
      color: #7E5109;
      padding: 15px;
      font-weight: bold;
      text-align: center;
    }
    
    .table-content {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .table-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      padding: 12px 15px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      text-align: center;
    }
    
    .table-row:last-child {
      border-bottom: none;
    }
    
    .mood-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: bold;
      color: white;
    }
    
    .mood-very-negative { background-color: #4A235A; }
    .mood-negative { background-color: #5D6D7E; }
    .mood-neutral { background-color: #F7B801; color: #7E5109; }
    .mood-positive { background-color: #00A5CF; }
    .mood-very-positive { background-color: #FF6B6B; }
    
    /* Ø£Ù†Ù…Ø§Ø· Mood Simulator */
    .mood-simulator {
      font-family: 'Tajawal', sans-serif;
      max-width: 700px;
      margin: 0 auto;
      padding: 25px;
      background: linear-gradient(135deg, #FEF9E7 0%, #F8F4E3 100%);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      direction: rtl;
      text-align: center;
    }
    
    .simulator-header {
      margin-bottom: 30px;
    }
    
    .simulator-title {
      font-size: 2rem;
      color: #F7B801;
      margin-bottom: 10px;
      font-weight: bold;
    }
    
    .simulator-subtitle {
      font-size: 1rem;
      color: #7E5109;
      opacity: 0.8;
    }
    
    .mood-display {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      position: relative;
      overflow: hidden;
    }
    
    .mood-icon {
      font-size: 4rem;
      margin-bottom: 15px;
      transition: all 0.5s ease;
    }
    
    .mood-label {
      font-size: 1.5rem;
      font-weight: bold;
      color: #7E5109;
      margin-bottom: 10px;
    }
    
    .mood-score {
      font-size: 1.2rem;
      color: #7E5109;
      opacity: 0.8;
    }
    
    .mood-bar {
      width: 100%;
      height: 10px;
      background: #f0f0f0;
      border-radius: 5px;
      margin-top: 15px;
      overflow: hidden;
    }
    
    .mood-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #F7B801, #00D084);
      border-radius: 5px;
      transition: width 0.5s ease, background 0.5s ease;
    }
    
    .mood-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .mood-btn {
      padding: 15px 10px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Tajawal', sans-serif;
      color: white;
      position: relative;
      overflow: hidden;
    }
    
    .mood-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .mood-btn.processing {
      opacity: 0.7;
      cursor: not-allowed;
    }
    
    .mood-btn.processing::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      animation: processing-shine 1s infinite;
    }
    
    @keyframes processing-shine {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    .mood-very-negative { background: linear-gradient(135deg, #4A235A, #5B2C6F); }
    .mood-negative { background: linear-gradient(135deg, #5D6D7E, #566573); }
    .mood-neutral { background: linear-gradient(135deg, #F7B801, #F8F4E3); color: #7E5109; }
    .mood-positive { background: linear-gradient(135deg, #00A5CF, #00D084); }
    .mood-very-positive { background: linear-gradient(135deg, #FF6B6B, #4ECDC4); }
    
    .random-section {
      margin-top: 20px;
    }
    
    .random-btn {
      background: linear-gradient(135deg, #7E5109, #5D4037);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Tajawal', sans-serif;
    }
    
    .random-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(126, 81, 9, 0.3);
    }
    
    .history-section {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .history-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #7E5109;
      margin-bottom: 15px;
    }
    
    .history-list {
      max-height: 200px;
      overflow-y: auto;
      text-align: right;
    }
    
    .history-item {
      padding: 8px 12px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.9rem;
    }
    
    .history-item:last-child {
      border-bottom: none;
    }
    
    .history-mood {
      font-weight: bold;
    }
    
    .history-time {
      color: #999;
      font-size: 0.8rem;
    }
    
    .clear-history-btn {
      background: transparent;
      color: #999;
      border: 1px solid #ddd;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.8rem;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.3s ease;
    }
    
    .clear-history-btn:hover {
      background: #f5f5f5;
      border-color: #ccc;
    }
    
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #00D084;
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }
    
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    @media (max-width: 768px) {
      .identity-generator, .mood-archive, .mood-simulator {
        padding: 15px;
      }
      
      .identity-title, .archive-title, .simulator-title {
        font-size: 1.5rem;
      }
      
      .form-actions, .controls-section {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
      }
      
      .table-row {
        grid-template-columns: 1fr;
        gap: 5px;
      }
      
      .mood-buttons {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">Ù†Ø¨Ø¶ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</div>
      <div class="tagline">Ù…Ø­Ø±Ùƒ Ø°ÙƒÙŠ ÙŠØ­Ù„Ù„ Ù…Ø²Ø§Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙŠØºÙŠØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹</div>
    </header>
    
    <main>
      <div class="tabs">
        <div class="tab active" data-tab="identity">Ù…ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ù‡ÙˆÙŠØ©</div>
        <div class="tab" data-tab="archive">Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</div>
        <div class="tab" data-tab="simulator">Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ù…Ø²Ø§Ø¬</div>
      </div>
      
      <div class="tab-content active" id="identity">
        <h2 class="section-title">Ù…ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©</h2>
        <p class="section-description">Ø£Ù†Ø´Ø¦ Ù‡ÙˆÙŠØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„ÙØ±ÙŠØ¯Ø© ÙÙŠ Ù†Ø¨Ø¶ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</p>
        
        <div id="identity-generator-container"></div>
      </div>
      
      <div class="tab-content" id="archive">
        <h2 class="section-title">Ø£Ø±Ø´ÙŠÙ Ù†Ø¨Ø¶ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</h2>
        <p class="section-description">ØªØªØ¨Ø¹ ÙˆØªØ­Ù„ÙŠÙ„ Ù…Ø²Ø§Ø¬Ùƒ Ø¹Ù„Ù‰ Ù…Ø± Ø§Ù„Ø²Ù…Ù†</p>
        
        <div id="mood-archive-container"></div>
      </div>
      
      <div class="tab-content" id="simulator">
        <h2 class="section-title">Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ù…Ø²Ø§Ø¬</h2>
        <p class="section-description">Ø§Ø®ØªØ¨Ø± ÙƒÙŠÙÙŠØ© ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù…Ø¹ Ù…Ø´Ø§Ø¹Ø±Ùƒ</p>
        
        <div id="mood-simulator-container"></div>
      </div>
    </main>
    
    <footer>
      <p>Ù†Ø¨Ø¶ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± &copy; 2023 - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
    </footer>
  </div>
  
  <script>
    // Identity Generator Component
    class IdentityGenerator {
      constructor(containerId) {
        this.container = document.getElementById(containerId);
        if (!this.container) {
          console.error(`Container with id "${containerId}" not found`);
          return;
        }
        
        this.identity = {
          name: '',
          avatar: '',
          bio: '',
          interests: [],
          personalityTraits: []
        };
        
        this.init();
      }
      
      init() {
        this.render();
        this.attachEventListeners();
        this.generateAvatar();
      }
      
      render() {
        this.container.innerHTML = `
          <div class="identity-generator">
            <div class="identity-header">
              <h1 class="identity-title">Ù…ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©</h1>
              <p class="identity-subtitle">Ø£Ù†Ø´Ø¦ Ù‡ÙˆÙŠØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„ÙØ±ÙŠØ¯Ø© ÙÙŠ Ù†Ø¨Ø¶ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</p>
            </div>
            
            <div class="avatar-section">
              <div class="avatar-preview">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=algeria" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©">
              </div>
              <button class="generate-avatar-btn">ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ø±Ù…Ø²ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
            </div>
            
            <div class="form-section">
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                <input type="text" class="form-input" id="name-input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
              </div>
              
              <div class="form-group">
                <label class="form-label">Ù†Ø¨Ø°Ø© Ø´Ø®ØµÙŠØ©</label>
                <textarea class="form-textarea" id="bio-input" placeholder="Ø£Ø®Ø¨Ø±Ù†Ø§ Ø¹Ù† Ù†ÙØ³Ùƒ ÙÙŠ Ø¨Ø¶Ø¹ ÙƒÙ„Ù…Ø§Øª..."></textarea>
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª</label>
                <div class="interests-container">
                  <div class="interest-tag" data-interest="technology">Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</div>
                  <div class="interest-tag" data-interest="sports">Ø§Ù„Ø±ÙŠØ§Ø¶Ø©</div>
                  <div class="interest-tag" data-interest="art">Ø§Ù„ÙÙ†</div>
                  <div class="interest-tag" data-interest="music">Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</div>
                  <div class="interest-tag" data-interest="travel">Ø§Ù„Ø³ÙØ±</div>
                  <div class="interest-tag" data-interest="food">Ø§Ù„Ø·Ø¹Ø§Ù…</div>
                  <div class="interest-tag" data-interest="reading">Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</div>
                  <div class="interest-tag" data-interest="nature">Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©</div>
                </div>
              </div>
              
              <div class="form-group">
                <label class="form-label">Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</label>
                <select class="form-select" id="trait-select">
                  <option value="">Ø§Ø®ØªØ± Ø³Ù…Ø© Ø´Ø®ØµÙŠØ©</option>
                  <option value="creative">Ù…Ø¨Ø¯Ø¹</option>
                  <option value="analytical">ØªØ­Ù„ÙŠÙ„ÙŠ</option>
                  <option value="adventurous">Ù…ØºØ§Ù…Ø±</option>
                  <option value="social">Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</option>
                  <option value="thoughtful">Ù…ØªØ£Ù…Ù„</option>
                  <option value="energetic">Ù†Ø´ÙŠØ·</option>
                </select>
              </div>
            </div>
            
            <div class="form-actions">
              <button class="btn btn-secondary" id="clear-btn">Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
              <button class="btn btn-primary" id="save-btn">Ø­ÙØ¸ Ø§Ù„Ù‡ÙˆÙŠØ©</button>
            </div>
            
            <div class="identity-preview" id="preview" style="display: none;">
              <div class="preview-header">
                <div class="preview-avatar">
                  <img src="" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©">
                </div>
                <div class="preview-info">
                  <h3></h3>
                  <p></p>
                </div>
              </div>
              <div class="preview-bio"></div>
              <div class="preview-interests"></div>
            </div>
          </div>
        `;
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Toast
        this.toast = document.createElement('div');
        this.toast.className = 'toast';
        document.body.appendChild(this.toast);
      }
      
      attachEventListeners() {
        // Ø²Ø± ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©
        const generateBtn = this.container.querySelector('.generate-avatar-btn');
        generateBtn.addEventListener('click', () => this.generateAvatar());
        
        // Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        const nameInput = this.container.querySelector('#name-input');
        const bioInput = this.container.querySelector('#bio-input');
        const traitSelect = this.container.querySelector('#trait-select');
        
        nameInput.addEventListener('input', (e) => {
          this.identity.name = e.target.value;
          this.updatePreview();
        });
        
        bioInput.addEventListener('input', (e) => {
          this.identity.bio = e.target.value;
          this.updatePreview();
        });
        
        traitSelect.addEventListener('change', (e) => {
          this.identity.personalityTraits = e.target.value ? [e.target.value] : [];
          this.updatePreview();
        });
        
        // Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª
        const interestTags = this.container.querySelectorAll('.interest-tag');
        interestTags.forEach(tag => {
          tag.addEventListener('click', () => {
            const interest = tag.getAttribute('data-interest');
            this.toggleInterest(interest, tag);
          });
        });
        
        // Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        const clearBtn = this.container.querySelector('#clear-btn');
        const saveBtn = this.container.querySelector('#save-btn');
        
        clearBtn.addEventListener('click', () => this.clearForm());
        saveBtn.addEventListener('click', () => this.saveIdentity());
      }
      
      generateAvatar() {
        const seeds = ['algeria', 'oasis', 'sahara', 'casbah', 'kabyle', 'tuareg', 'oran', 'constantine'];
        const randomSeed = seeds[Math.floor(Math.random() * seeds.length)];
        const avatarUrl = `https://api.dicebear.com/7.x/avataaars/svg?seed=${randomSeed}`;
        
        const avatarPreview = this.container.querySelector('.avatar-preview img');
        avatarPreview.src = avatarUrl;
        
        this.identity.avatar = avatarUrl;
        this.updatePreview();
        
        this.showToast('ØªÙ… ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ø±Ù…Ø²ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©!');
      }
      
      toggleInterest(interest, element) {
        const index = this.identity.interests.indexOf(interest);
        
        if (index === -1) {
          this.identity.interests.push(interest);
          element.classList.add('selected');
        } else {
          this.identity.interests.splice(index, 1);
          element.classList.remove('selected');
        }
        
        this.updatePreview();
      }
      
      updatePreview() {
        const preview = this.container.querySelector('#preview');
        
        if (!this.identity.name && !this.identity.bio) {
          preview.style.display = 'none';
          return;
        }
        
        preview.style.display = 'block';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©
        const previewAvatar = preview.querySelector('.preview-avatar img');
        previewAvatar.src = this.identity.avatar || 'https://api.dicebear.com/7.x/avataaars/svg?seed=algeria';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
        const previewName = preview.querySelector('.preview-info h3');
        const previewTrait = preview.querySelector('.preview-info p');
        const previewBio = preview.querySelector('.preview-bio');
        const previewInterests = preview.querySelector('.preview-interests');
        
        previewName.textContent = this.identity.name || 'Ø§Ø³Ù… ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        
        const traitLabels = {
          'creative': 'Ù…Ø¨Ø¯Ø¹',
          'analytical': 'ØªØ­Ù„ÙŠÙ„ÙŠ',
          'adventurous': 'Ù…ØºØ§Ù…Ø±',
          'social': 'Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ',
          'thoughtful': 'Ù…ØªØ£Ù…Ù„',
          'energetic': 'Ù†Ø´ÙŠØ·'
        };
        
        previewTrait.textContent = this.identity.personalityTraits.length > 0 
          ? traitLabels[this.identity.personalityTraits[0]] 
          : 'Ø´Ø®ØµÙŠØ© ÙØ±ÙŠØ¯Ø©';
        
        previewBio.textContent = this.identity.bio || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø¨Ø°Ø© Ø´Ø®ØµÙŠØ©';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª
        previewInterests.innerHTML = '';
        this.identity.interests.forEach(interest => {
          const interestElement = document.createElement('span');
          interestElement.className = 'preview-interest';
          interestElement.textContent = this.getInterestLabel(interest);
          previewInterests.appendChild(interestElement);
        });
      }
      
      getInterestLabel(interest) {
        const labels = {
          'technology': 'Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§',
          'sports': 'Ø§Ù„Ø±ÙŠØ§Ø¶Ø©',
          'art': 'Ø§Ù„ÙÙ†',
          'music': 'Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰',
          'travel': 'Ø§Ù„Ø³ÙØ±',
          'food': 'Ø§Ù„Ø·Ø¹Ø§Ù…',
          'reading': 'Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©',
          'nature': 'Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©'
        };
        
        return labels[interest] || interest;
      }
      
      clearForm() {
        this.identity = {
          name: '',
          avatar: '',
          bio: '',
          interests: [],
          personalityTraits: []
        };
        
        // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
        this.container.querySelector('#name-input').value = '';
        this.container.querySelector('#bio-input').value = '';
        this.container.querySelector('#trait-select').value = '';
        
        // Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª
        const interestTags = this.container.querySelectorAll('.interest-tag');
        interestTags.forEach(tag => tag.classList.remove('selected'));
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©
        this.generateAvatar();
        
        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
        this.container.querySelector('#preview').style.display = 'none';
        
        this.showToast('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
      }
      
      saveIdentity() {
        if (!this.identity.name) {
          this.showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
          return;
        }
        
        // Ø­ÙØ¸ ÙÙŠ localStorage
        localStorage.setItem('nabd_identity', JSON.stringify(this.identity));
        
        this.showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‡ÙˆÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
        
        // Ø¥Ø·Ù„Ø§Ù‚ Ø­Ø¯Ø« Ø§Ù„Ø­ÙØ¸
        window.dispatchEvent(new CustomEvent('identitySaved', { detail: this.identity }));
      }
      
      showToast(message) {
        this.toast.textContent = message;
        this.toast.classList.add('show');
        
        setTimeout(() => {
          this.toast.classList.remove('show');
        }, 3000);
      }
    }
    
    // Mood Archive Component
    class MoodArchive {
      constructor(containerId) {
        this.container = document.getElementById(containerId);
        if (!this.container) {
          console.error(`Container with id "${containerId}" not found`);
          return;
        }
        
        this.chart = null;
        this.moodData = [];
        
        this.init();
      }
      
      init() {
        this.render();
        this.loadMoodData();
        this.initializeChart();
        this.attachEventListeners();
      }
      
      render() {
        this.container.innerHTML = `
          <div class="mood-archive">
            <div class="archive-header">
              <h1 class="archive-title">Ø£Ø±Ø´ÙŠÙ Ù†Ø¨Ø¶ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</h1>
              <p class="archive-subtitle">ØªØªØ¨Ø¹ ÙˆØªØ­Ù„ÙŠÙ„ Ù…Ø²Ø§Ø¬Ùƒ Ø¹Ù„Ù‰ Ù…Ø± Ø§Ù„Ø²Ù…Ù†</p>
            </div>
            
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-value" id="total-days">0</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙŠØ§Ù…</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-value" id="avg-score">0</div>
                <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ù‚Ø§Ø·</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-value" id="dominant-mood">-</div>
                <div class="stat-label">Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø³Ø§Ø¦Ø¯</div>
              </div>
            </div>
            
            <div class="chart-container">
              <canvas id="moodChart"></canvas>
            </div>
            
            <div class="controls-section">
              <button class="btn btn-primary" id="refresh-btn">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
              <button class="btn btn-secondary" id="export-json-btn">ØªØµØ¯ÙŠØ± JSON</button>
            </div>
            
            <div class="mood-table">
              <div class="table-header">Ø³Ø¬Ù„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</div>
              <div class="table-content" id="mood-table-body">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
              </div>
            </div>
          </div>
        `;
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Toast
        this.toast = document.createElement('div');
        this.toast.className = 'toast';
        document.body.appendChild(this.toast);
      }
      
      loadMoodData() {
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
        const savedData = localStorage.getItem('nabd_mood_history');
        
        if (savedData) {
          this.moodData = JSON.parse(savedData);
        } else {
          // Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ‡Ù…ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
          this.generateMockData();
        }
        
        this.updateStats();
        this.updateTable();
      }
      
      generateMockData() {
        const today = new Date();
        const moods = ['very_negative', 'negative', 'neutral', 'positive', 'very_positive'];
        const moodLabels = {
          'very_negative': 'Ø­Ø²ÙŠÙ† Ø¬Ø¯Ø§Ù‹',
          'negative': 'Ø­Ø²ÙŠÙ†',
          'neutral': 'Ù…Ø­Ø§ÙŠØ¯',
          'positive': 'Ø³Ø¹ÙŠØ¯',
          'very_positive': 'Ø³Ø¹ÙŠØ¯ Ø¬Ø¯Ø§Ù‹'
        };
        
        for (let i = 30; i >= 0; i--) {
          const date = new Date(today);
          date.setDate(date.getDate() - i);
          
          const mood = moods[Math.floor(Math.random() * moods.length)];
          const score = Math.floor(Math.random() * 100);
          
          this.moodData.push({
            date: date.toISOString().split('T')[0],
            mood: mood,
            moodLabel: moodLabels[mood],
            score: score
          });
        }
        
        localStorage.setItem('nabd_mood_history', JSON.stringify(this.moodData));
      }
      
      initializeChart() {
        const ctx = document.getElementById('moodChart');
        if (!ctx) return;
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Chart.js
        if (typeof Chart === 'undefined') {
          this.showToast('Ù…ÙƒØªØ¨Ø© Chart.js ØºÙŠØ± Ù…Ø­Ù…Ù„Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù€ HTML.');
          return;
        }
        
        this.chart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: this.moodData.map(entry => entry.date),
            datasets: [{
              label: 'Ù†Ø¨Ø¶ Ø§Ù„Ù…Ø²Ø§Ø¬',
              data: this.moodData.map(entry => entry.score),
              borderColor: '#00D084',
              backgroundColor: 'rgba(0, 208, 132, 0.1)',
              tension: 0.4,
              fill: true,
              pointRadius: 5,
              pointHoverRadius: 8,
              pointBackgroundColor: '#00D084',
              pointBorderColor: '#fff',
              pointBorderWidth: 2
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'top',
                labels: {
                  font: {
                    family: 'Tajawal',
                    size: 14
                  },
                  color: '#7E5109'
                }
              },
              tooltip: {
                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                titleFont: {
                  family: 'Tajawal',
                  size: 14
                },
                bodyFont: {
                  family: 'Tajawal',
                  size: 12
                },
                callbacks: {
                  label: (context) => {
                    const index = context.dataIndex;
                    const moodEntry = this.moodData[index];
                    return `Ø§Ù„Ù…Ø²Ø§Ø¬: ${moodEntry.moodLabel} (${context.parsed.y} Ù†Ù‚Ø·Ø©)`;
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                max: 100,
                ticks: {
                  font: {
                    family: 'Tajawal'
                  },
                  color: '#7E5109'
                },
                grid: {
                  color: 'rgba(0, 0, 0, 0.05)'
                }
              },
              x: {
                ticks: {
                  font: {
                    family: 'Tajawal'
                  },
                  color: '#7E5109',
                  maxRotation: 45,
                  minRotation: 45
                },
                grid: {
                  color: 'rgba(0, 0, 0, 0.05)'
                }
              }
            }
          }
        });
      }
      
      updateStats() {
        const totalDays = this.moodData.length;
        const avgScore = Math.round(this.moodData.reduce((sum, entry) => sum + entry.score, 0) / totalDays);
        
        const moodCounts = {};
        this.moodData.forEach(entry => {
          moodCounts[entry.mood] = (moodCounts[entry.mood] || 0) + 1;
        });
        
        const dominantMood = Object.keys(moodCounts).reduce((a, b) => 
          moodCounts[a] > moodCounts[b] ? a : b
        );
        
        const moodLabels = {
          'very_negative': 'Ø­Ø²ÙŠÙ†',
          'negative': 'Ø­Ø²ÙŠÙ†',
          'neutral': 'Ù…Ø­Ø§ÙŠØ¯',
          'positive': 'Ø³Ø¹ÙŠØ¯',
          'very_positive': 'Ø³Ø¹ÙŠØ¯'
        };
        
        document.getElementById('total-days').textContent = totalDays;
        document.getElementById('avg-score').textContent = avgScore;
        document.getElementById('dominant-mood').textContent = moodLabels[dominantMood] || '-';
      }
      
      updateTable() {
        const tableBody = document.getElementById('mood-table-body');
        if (!tableBody) return;
        
        tableBody.innerHTML = '';
        
        // Ø¹Ø±Ø¶ Ø¢Ø®Ø± 10 Ø³Ø¬Ù„Ø§Øª ÙÙ‚Ø·
        const recentData = this.moodData.slice(-10).reverse();
        
        recentData.forEach(entry => {
          const row = document.createElement('div');
          row.className = 'table-row';
          
          row.innerHTML = `
            <div>${entry.date}</div>
            <div><span class="mood-badge mood-${entry.mood}">${entry.moodLabel}</span></div>
            <div>${entry.score} Ù†Ù‚Ø·Ø©</div>
          `;
          
          tableBody.appendChild(row);
        });
      }
      
      attachEventListeners() {
        const refreshBtn = document.getElementById('refresh-btn');
        const exportJsonBtn = document.getElementById('export-json-btn');
        
        refreshBtn.addEventListener('click', () => this.refreshData());
        exportJsonBtn.addEventListener('click', () => this.exportJSON());
      }
      
      refreshData() {
        this.moodData = [];
        this.generateMockData();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
        if (this.chart) {
          this.chart.data.labels = this.moodData.map(entry => entry.date);
          this.chart.data.datasets[0].data = this.moodData.map(entry => entry.score);
          this.chart.update();
        }
        
        this.updateStats();
        this.updateTable();
        
        this.showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
      }
      
      exportJSON() {
        const dataStr = JSON.stringify(this.moodData, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
        
        const exportFileDefaultName = 'nabd-algeria-mood-archive.json';
        
        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute('download', exportFileDefaultName);
        linkElement.click();
        
        this.showToast('ØªÙ… ØªØµØ¯ÙŠØ± JSON Ø¨Ù†Ø¬Ø§Ø­!');
      }
      
      showToast(message) {
        this.toast.textContent = message;
        this.toast.classList.add('show');
        
        setTimeout(() => {
          this.toast.classList.remove('show');
        }, 3000);
      }
    }
    
    // Mood Simulator Component
    class MoodSimulator {
      constructor(containerId) {
        this.container = document.getElementById(containerId);
        if (!this.container) {
          console.error(`Container with id "${containerId}" not found`);
          return;
        }
        
        // Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø§ÙƒÙŠ
        this.state = {
          currentMood: 'neutral',
          moodHistory: [],
          isProcessing: false,
          lastClickTime: 0
        };
        
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª debounce (Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©)
        this.debounceDelay = 500;
        
        // Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø·Ø§Ù‚Ø©
        this.energyLevels = {
          'very_negative': { min: 0, max: 20, color: '#4A235A', label: 'Ø­Ø²ÙŠÙ† Ø¬Ø¯Ø§Ù‹' },
          'negative': { min: 21, max: 40, color: '#5D6D7E', label: 'Ø­Ø²ÙŠÙ†' },
          'neutral': { min: 41, max: 60, color: '#F7B801', label: 'Ù…Ø­Ø§ÙŠØ¯' },
          'positive': { min: 61, max: 80, color: '#00A5CF', label: 'Ø³Ø¹ÙŠØ¯' },
          'very_positive': { min: 81, max: 100, color: '#FF6B6B', label: 'Ø³Ø¹ÙŠØ¯ Ø¬Ø¯Ø§Ù‹' }
        };
        
        this.init();
      }
      
      init() {
        this.render();
        this.attachEventListeners();
        this.loadState();
      }
      
      render() {
        this.container.innerHTML = `
          <div class="mood-simulator">
            <div class="simulator-header">
              <h1 class="simulator-title">Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ù…Ø²Ø§Ø¬</h1>
              <p class="simulator-subtitle">Ø§Ø®ØªØ¨Ø± ÙƒÙŠÙÙŠØ© ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù…Ø¹ Ù…Ø´Ø§Ø¹Ø±Ùƒ</p>
            </div>
            
            <div class="mood-display">
              <div class="mood-icon">ğŸ˜</div>
              <div class="mood-label">Ù…Ø­Ø§ÙŠØ¯</div>
              <div class="mood-score">50 Ù†Ù‚Ø·Ø©</div>
              <div class="mood-bar">
                <div class="mood-bar-fill" style="width: 50%; background: linear-gradient(90deg, #F7B801, #00D084);"></div>
              </div>
            </div>
            
            <div class="controls-section">
              <div class="mood-buttons">
                <button class="mood-btn mood-very-negative" data-mood="very_negative">Ø­Ø²ÙŠÙ† Ø¬Ø¯Ø§Ù‹</button>
                <button class="mood-btn mood-negative" data-mood="negative">Ø­Ø²ÙŠÙ†</button>
                <button class="mood-btn mood-neutral" data-mood="neutral">Ù…Ø­Ø§ÙŠØ¯</button>
                <button class="mood-btn mood-positive" data-mood="positive">Ø³Ø¹ÙŠØ¯</button>
                <button class="mood-btn mood-very-positive" data-mood="very_positive">Ø³Ø¹ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</button>
              </div>
              
              <div class="random-section">
                <button class="random-btn" id="random-mood-btn">Ù…Ø²Ø§Ø¬ Ø¹Ø´ÙˆØ§Ø¦ÙŠ</button>
              </div>
            </div>
            
            <div class="history-section">
              <h3 class="history-title">Ø³Ø¬Ù„ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</h3>
              <div class="history-list" id="history-list">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
              </div>
              <button class="clear-history-btn" id="clear-history-btn">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</button>
            </div>
          </div>
        `;
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Toast
        this.toast = document.createElement('div');
        this.toast.className = 'toast';
        document.body.appendChild(this.toast);
      }
      
      attachEventListeners() {
        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ø¬
        const moodButtons = this.container.querySelectorAll('.mood-btn');
        moodButtons.forEach(button => {
          button.addEventListener('click', (e) => {
            const mood = e.target.getAttribute('data-mood');
            this.handleMoodChange(mood);
          });
        });
        
        // Ø²Ø± Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        const randomBtn = this.container.querySelector('#random-mood-btn');
        randomBtn.addEventListener('click', () => {
          this.handleRandomMood();
        });
        
        // Ø²Ø± Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„
        const clearBtn = this.container.querySelector('#clear-history-btn');
        clearBtn.addEventListener('click', () => {
          this.clearHistory();
        });
      }
      
      // Ø¯Ø§Ù„Ø© debounce Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
      debounce(func, delay) {
        let timeoutId;
        return (...args) => {
          // Ù…Ø³Ø­ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø³Ø§Ø¨Ù‚
          clearTimeout(timeoutId);
          
          // ØªØ¹ÙŠÙŠÙ† Ù…Ø¤Ù‚Øª Ø¬Ø¯ÙŠØ¯
          timeoutId = setTimeout(() => {
            func.apply(this, args);
          }, delay);
        };
      }
      
      // Ù…Ø¹Ø§Ù„Ø¬ ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø²Ø§Ø¬ Ù…Ø¹ debounce
      handleMoodChange(mood) {
        if (this.state.isProcessing) {
          return;
        }
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… debounce Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø²Ø§Ø¬
        const debouncedMoodChange = this.debounce((newMood) => {
          this.setMood(newMood);
        }, this.debounceDelay);
        
        // Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        this.setProcessingState(true);
        
        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© debounced
        debouncedMoodChange(mood);
      }
      
      // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„ÙØ¹Ù„ÙŠ
      setMood(mood) {
        const previousMood = this.state.currentMood;
        this.state.currentMood = mood;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        this.updateMoodDisplay(mood);
        
        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„
        this.addToHistory(mood);
        
        // Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø©
        this.saveState();
        
        // Ø¥Ø·Ù„Ø§Ù‚ Ø­Ø¯Ø« ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø²Ø§Ø¬
        this.dispatchMoodChangeEvent(mood, previousMood);
        
        // Ø¥Ø²Ø§Ù„Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        this.setProcessingState(false);
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
        this.showToast(`ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø²Ø§Ø¬ Ø¥Ù„Ù‰: ${this.energyLevels[mood].label}`);
      }
      
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ
      handleRandomMood() {
        if (this.state.isProcessing) {
          return;
        }
        
        const moods = Object.keys(this.energyLevels);
        const randomMood = moods[Math.floor(Math.random() * moods.length)];
        
        this.handleMoodChange(randomMood);
      }
      
      // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²Ø§Ø¬
      updateMoodDisplay(mood) {
        const moodData = this.energyLevels[mood];
        const score = Math.floor(Math.random() * (moodData.max - moodData.min + 1)) + moodData.min;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
        const moodIcons = {
          'very_negative': 'ğŸ˜­',
          'negative': 'ğŸ˜”',
          'neutral': 'ğŸ˜',
          'positive': 'ğŸ˜Š',
          'very_positive': 'ğŸ˜„'
        };
        
        this.container.querySelector('.mood-icon').textContent = moodIcons[mood];
        this.container.querySelector('.mood-label').textContent = moodData.label;
        this.container.querySelector('.mood-score').textContent = `${score} Ù†Ù‚Ø·Ø©`;
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        const barFill = this.container.querySelector('.mood-bar-fill');
        barFill.style.width = `${score}%`;
        barFill.style.background = `linear-gradient(90deg, ${moodData.color}, #00D084)`;
      }
      
      // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„
      addToHistory(mood) {
        const now = new Date();
        const historyItem = {
          mood: mood,
          label: this.energyLevels[mood].label,
          time: now.toLocaleTimeString('ar-DZ'),
          timestamp: now.getTime()
        };
        
        this.state.moodHistory.unshift(historyItem);
        
        // Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø¢Ø®Ø± 20 Ø¹Ù†ØµØ± ÙÙ‚Ø·
        if (this.state.moodHistory.length > 20) {
          this.state.moodHistory = this.state.moodHistory.slice(0, 20);
        }
        
        this.updateHistoryDisplay();
      }
      
      // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„
      updateHistoryDisplay() {
        const historyList = this.container.querySelector('#history-list');
        historyList.innerHTML = '';
        
        this.state.moodHistory.forEach(item => {
          const historyElement = document.createElement('div');
          historyElement.className = 'history-item';
          
          historyElement.innerHTML = `
            <span class="history-mood">${item.label}</span>
            <span class="history-time">${item.time}</span>
          `;
          
          historyList.appendChild(historyElement);
        });
      }
      
      // Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„
      clearHistory() {
        this.state.moodHistory = [];
        this.updateHistoryDisplay();
        this.saveState();
        this.showToast('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„');
      }
      
      // ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
      setProcessingState(isProcessing) {
        this.state.isProcessing = isProcessing;
        
        const buttons = this.container.querySelectorAll('.mood-btn');
        buttons.forEach(button => {
          if (isProcessing) {
            button.classList.add('processing');
            button.disabled = true;
          } else {
            button.classList.remove('processing');
            button.disabled = false;
          }
        });
      }
      
      // Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø©
      saveState() {
        const stateToSave = {
          currentMood: this.state.currentMood,
          moodHistory: this.state.moodHistory
        };
        
        localStorage.setItem('nabd_mood_simulator_state', JSON.stringify(stateToSave));
      }
      
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©
      loadState() {
        const savedState = localStorage.getItem('nabd_mood_simulator_state');
        
        if (savedState) {
          try {
            const parsedState = JSON.parse(savedState);
            this.state.currentMood = parsedState.currentMood || 'neutral';
            this.state.moodHistory = parsedState.moodHistory || [];
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ù…Ù„Ø©
            this.updateMoodDisplay(this.state.currentMood);
            this.updateHistoryDisplay();
          } catch (error) {
            console.error('Error loading mood simulator state:', error);
          }
        }
      }
      
      // Ø¥Ø·Ù„Ø§Ù‚ Ø­Ø¯Ø« ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø²Ø§Ø¬
      dispatchMoodChangeEvent(newMood, previousMood) {
        const event = new CustomEvent('moodChanged', {
          detail: {
            newMood: newMood,
            previousMood: previousMood,
            moodData: this.energyLevels[newMood]
          }
        });
        
        window.dispatchEvent(event);
      }
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
      showToast(message) {
        this.toast.textContent = message;
        this.toast.classList.add('show');
        
        setTimeout(() => {
          this.toast.classList.remove('show');
        }, 3000);
      }
    }
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    document.addEventListener('DOMContentLoaded', () => {
      const tabs = document.querySelectorAll('.tab');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabId = tab.getAttribute('data-tab');
          
          // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
          tabs.forEach(t => t.classList.remove('active'));
          tabContents.forEach(tc => tc.classList.remove('active'));
          
          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙˆÙ…Ø­ØªÙˆØ§Ù‡
          tab.classList.add('active');
          document.getElementById(tabId).classList.add('active');
        });
      });
      
      // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª
      const identityGenerator = new IdentityGenerator('identity-generator-container');
      const moodArchive = new MoodArchive('mood-archive-container');
      const moodSimulator = new MoodSimulator('mood-simulator-container');
    });
  </script>
</body>
</html>
